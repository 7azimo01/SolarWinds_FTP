<!--#include "..\Strings\Strings.strings"-->
<!--#include "..\..\Common\Strings\Strings.strings"-->
%PRIV_GROUP_ADMIN%<div id="EventRulesDialoginner" style="display:none;"><form name="EventsFilterForm" onsubmit="return (false);"><div id="RuleDialogContent" style="width:520px;padding:0 5px 0 5px;"><table border="0" class="DialogTable"><tr><td style="width:430px;"><div style="display:inline;"><img alt="$FILTER_RULE_EVENTS$" src="%ADMIN_FILE%Images/Filter32.png" width="32" height="32" class="header-icon" />$FILTER_RULE_INFO$<div style='clear:both;height:5px;overflow:hidden;'></div></div><div id="FilterInfoGroup" style=""><div style="float:left;width:175px;padding-left:5px;"><div>$NAME$:<br /><div style="overflow:auto"><span id="RuleName"></span></div></div><div id="LogicGroup"><span id="Logic"></span></div><div style="padding-top:5px;"><span id="RuleEnabled"></span></div></div><div style="float:left;width:230px;">$DESCRIPTION$:<br/><div style="overflow:auto"><textarea id="Description" name="Description" class="aw-border" style="width:220px;height:80px;"></textarea></div></div></div></td><td style="text-align:right;vertical-align:top;" rowspan="2"><span id="SaveFilterRuleButton"></span><br /><span id="CloseEventFilterButton"></span><br /><br /><span id="HelpEventFilterButton"></span></td></tr><tr><td style="height:130px;padding-right:10px;" colspan="2"><span id="FilterCompList"></span><div style="padding-top:5px;"><span id="AddEventFilterCompButton"></span><span id="EditEventFilterCompButton"></span><span id="DeleteEventFilterCompButton"></span></div></td></tr></table></div><input type="hidden" id="RuleObjectID" name="ObjectID"/></form></div><div id="FilterCompDialoginner" style="display:none;"><form name="FilterCompForm" onsubmit="return (false);"><div id="FilterCompDialogContent"><table border="0" class="DialogTable"><tr><td style="width:500px;vertical-align:top;"><div style="display:inline;"><img alt="$FILTER_COMP$" src="%ADMIN_FILE%Images/Filter32.png" width="32" height="32" class="header-icon" />$FILTER_COMP_INFO$<div style='clear:both;height:5px;overflow:hidden;'></div></div></td><td style="text-align:right;vertical-align:top;padding-right:5px;" rowspan="2"><span id="SaveFilterCompButton"></span>	<br /><span id="CloseFilterCompButton"></span><br /><span id="HelpFilterCompButton"></span><div style="margin-top:20px;"><span id="EventCompAdvancedButton"></span></div></td></tr><tr><td style="width:500px;height:20px;"><div style="float:left;width:14px;line-height:25px;margin-left:5px;">$IF$</div><div style="float:left;width:167px;overflow:auto"><span id="Variable"></span></div><div style="float:left;width:177px;overflow:auto"><span id="Comparison"></span></div><div style="float:left;width:122px;overflow:auto"><span id="Constant"></span></div><div style="clear:both;padding:5px;">$EVENTS_RULE_DATA_TYPE$:<div style="overflow:auto"><span id="DataType"></span></div></div></td></tr></table></div></form></div><script type="text/javascript" language="javascript">BuildDialog("$EVENTS_FILTER$","EventRulesDialog","560","380","","$CLOSE_CANCEL$","Filter16.png");var EventRuleName=CreateInputField("","RuleName","RuleName",undefined,150,undefined,undefined,OnSaveRule);var EventFilterEnabled=CreateCheckBox("$FILTER_ENABLED$","RuleEnabled","Filter_Enabled",false,undefined,true,"OnLoadFilterEnabled()",false);var EventRuleLogic=CreateRadioButtons(0,["$AND$","$OR$"],"Logic","Logic","140px",undefined,[0,1],undefined,true,70);CreateGroupBox("$FILTER_INFO_GROUP$","FilterInfoGroup",430,135,true);CreateGroupBox("$EVENT_RULE_LOGIC$","LogicGroup",150,50,true);function OnLoadFilterEnabled(sValue){EventFilterEnabled.setChecked(sValue=="1");}function OnSaveRule(){setTimeout(function(){if(Trim(document.getElementById(EventRuleName.getContent("box/text").getId()).value)!="")EventFilterList.OnSaveObject();else AlertDialog("$PLEASE_ENTER_FILTER_NAME$",undefined,OnEnterFilterName);},0);}function OnCloseEventFilterDialog(){HideDialog("EventRulesDialog");}var EventFilterCompList=CreateFiltersCompGrid("FilterCompList","FilterComps.xml?ID=%OBJECT_EDIT_ID%",OnEditFilterComp);var sOnAddFilterComp=String("OnAddFilterComp(");var sOnEditFilterComp=String("OnEditFilterComp(");var sOnRemoveFilterCompr=String("OnRemoveFilterComp(");CreateContextMenu([sOnAddFilterComp,sOnEditFilterComp,sOnRemoveFilterCompr],["$ADD_BUTTON$...",function(){return(OnEqualOneContextMenu(EventFilterCompList,"$EDIT_BUTTON$..."))},function(){return(OnGreaterZeroContextMenu(EventFilterCompList,"$DELETE_BUTTON$"))}],["New","Edit","FileDelete"],EventFilterCompList,"EventFilterCompListContext",true,true);EventFilterCompList.setStyle("height","100px");CreateDialogPushButton("$CANCEL_BUTTON$","CloseEventFilterButton",OnCloseEventFilterDialog);CreateDialogPushButton("$SAVE_BUTTON$","SaveFilterRuleButton",OnSaveRule);CreateDialogPushButton("$HELP_BUTTON$","HelpEventFilterButton",OnEventHelp);CreatePushButton("$ADD_BUTTON$...","AddEventFilterCompButton",OnAddFilterComp);CreatePushButton("$EDIT_BUTTON$...","EditEventFilterCompButton",OnEditFilterComp);CreatePushButton("$DELETE_BUTTON$...","DeleteEventFilterCompButton",OnRemoveFilterComp);BuildDialog("$FILTER_COMPS$","FilterCompDialog","590","173","","$CLOSE_CANCEL$","Filter16.png");var sEventRuleVars=["$Name","$LoginID","$SessionID","$IP","$IPName","$Dir","$Disk","$DFree","$FUp","$FDown","$FTot","$BUp","$Bdown","$BTot","$TConM","$TConS","$RatioUp","$RatioDown","$RatioType","$RatioCreditType","$RatioCredit","$QuotaUsed","$QuotaLeft","$QuotaMax","$CurrentDirMaxSize","$Protocol","$UserDomainName","$DomainName","$DomainDescription","$TimeRemaining","$LocalHomeDirectory","$Password","$UserEmailAddress","$FullName","$SpaceFullName","$FullNameSpace","$PathName","$FileName","$FileSize","$FileSizeFmt","$FileSizeKB","$LocalPathName","$LocalFileName","$OldLocalPathName","$OldLocalFileName","$OldPathName","$OldFileName","$UNow","$UAll","$U24h","$UAnonAll","$UAnonThisDomain","$UNonAnonAll","$UNonAnonThisDomain","$UThisName"];var sEventRuleCompValue=["0","1","2","3","4","5"];var sEventRuleCompStrings=["$SURULE_COMP_EQUAL_STR$","$SURULE_COMP_NOT_EQUAL_STR$","$SURULE_COMP_LESS_THAN_STR$","$SURULE_COMP_LESS_THAN_EQUAL_STR$","$SURULE_COMP_GREATER_THAN_STR$","$SURULE_COMP_GREATER_THAN_EQUAL_STR$"];var sEventRuleDataTypeValue=["0","1","2","3","4","5"];var sEventRuleDataTypeStrings=["$SURULE_TYPE_STRING_STR$","$SURULE_TYPE_CASE_SENSITIVE_STRING_STR$","$SURULE_TYPE_INTEGER_STR$","$SURULE_TYPE_UNSIGNED_INTEGER_STR$","$SURULE_TYPE_DOUBLE_STR$","$SURULE_TYPE_IP_ADDRESS_STR$"];var EventRuleVarCombo=CreateComboBox("","",sEventRuleVars,sEventRuleVars,"Variable","Variable",OnChangeVar,"OnVarLoad()",false,165,20,OnSaveFilterComp,true,true,true);var EventRuleCompCombo=CreateComboBox("","",sEventRuleCompStrings,sEventRuleCompValue,"Comparison","Comparison",OnChangeComp,"OnCompLoad()",false,175,20,OnSaveFilterComp);EventRuleCompCombo.getPopupTemplate().setStyle("height",(sEventRuleCompStrings.length<=10)?((16*sEventRuleCompStrings.length)+((AW.ie)?3:0))+"px":"163px");var EventRuleDataTypeCombo=CreateComboBox("","",sEventRuleDataTypeStrings,sEventRuleDataTypeValue,"DataType","DataType",OnChangeDataType,"OnDataTypeLoad()",false,220,20,OnSaveFilterComp);EventRuleDataTypeCombo.getPopupTemplate().setStyle("height",(sEventRuleDataTypeStrings.length<=10)?((16*sEventRuleDataTypeStrings.length)+((AW.ie)?3:0))+"px":"163px");CreateInputField("","Constant","Constant",undefined,120,undefined,undefined,OnSaveFilterComp);function OnVarLoad(sValue){var bFoundMatch=false;if(sValue.length){for(var nIndex=0;nIndex<EventRuleVarCombo.getItemCount();nIndex++){if(EventRuleVarCombo.getItemText(nIndex)==sValue){EventRuleVarCombo.setSelectedItems([nIndex]);EventRuleVarCombo.setControlText(EventRuleVarCombo.getItemText(nIndex));bFoundMatch=true;break;}}if(!bFoundMatch){EventRuleVarCombo.setControlText(sValue);EventRuleVarCombo.setControlValue(sValue);}}else{EventRuleVarCombo.setSelectedItems([0]);EventRuleVarCombo.setControlText(EventRuleVarCombo.getItemText(0));EventRuleVarCombo.setControlValue(EventRuleVarCombo.getItemText(0));}}function OnChangeVar(sValue){}function OnCompLoad(sValue){if(sValue.length)EventRuleCompCombo.setControlText(sEventRuleCompStrings[sValue]);else EventRuleCompCombo.setControlText(sEventRuleCompStrings[0]);}function OnChangeComp(sValue){}function OnDataTypeLoad(sValue){if(sValue.length)EventRuleDataTypeCombo.setControlText(sEventRuleDataTypeStrings[sValue]);else EventRuleDataTypeCombo.setControlText(sEventRuleDataTypeStrings[0]);}function OnChangeDataType(sValue){}function OnAddFilterComp(){EventFilterCompList.OnAddObject("FilterComp.xml%ADD_OBJECT_REF%CVarRule."+g_EventRuleObjID+".VarComparison&Temp=1","Result.xml%UPDATE_OBJECT_REF%CVarRule."+g_EventRuleObjID+".VarComparison.",document.FilterCompForm,"FilterCompDialog",[OnEventRuleLoad],g_bReadOnlyAccess);}function OnEditFilterComp(){EventFilterCompList.OnEditObject("FilterComp.xml","Result.xml%UPDATE_OBJECT_REF%CVarRule."+g_EventRuleObjID+".VarComparison.",document.FilterCompForm,"FilterCompDialog","$SELECT_ONLY_ONE_FILTER_COMP_EDIT$","$SELECT_ONLY_ONE_FILTER_COMP_EDIT$",[OnEventRuleLoad]);}function OnRemoveFilterComp(){EventFilterCompList.OnDeleteObject("Result.xml%DELETE_OBJECT_REF%CVarRule."+g_EventRuleObjID+".VarComparison&ID=%ID%","$ASK_DELETE_FILTER_COMP$","$SELECT_ONE_FILTER_COMP_DELETE$");}function OnSaveFilterComp(){EventFilterCompList.OnSaveObject();}function OnEnterFilterName(){EventRuleName.getContent("box/text").element().focus();}function OnCloseFilterCompDialog(){HideDialog("FilterCompDialog");}function OnEventRuleLoad(){var nTotalEvents=parseInt(EventFilterList.getRowCount()+1);var sEventText="";EventFilterList.EnableUpdates(false);g_EventRuleObjID=document.getElementById("RuleObjectID").value;EventFilterCompList.EnableUpdates(true,"%OBJECT_EDIT_ID%",g_EventRuleObjID);}function GetRuleCompText(nActionType){if(sEventRuleCompStrings[nActionType])return(sEventRuleCompStrings[nActionType]);else return(nActionType);}function GetRuleDataTypeText(nActionType){if(sEventRuleDataTypeStrings[nActionType])return(sEventRuleDataTypeStrings[nActionType]);else return(nActionType);}CreateDialogPushButton("$CANCEL_BUTTON$","CloseFilterCompButton",OnCloseFilterCompDialog);CreateDialogPushButton("$SAVE_BUTTON$","SaveFilterCompButton",OnSaveFilterComp);CreateDialogPushButton("$HELP_BUTTON$","HelpFilterCompButton",OnEventHelp);</script>