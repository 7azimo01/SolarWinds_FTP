var SU_DIR_ACCESS_READ=1;var SU_DIR_ACCESS_WRITE=2;var SU_DIR_ACCESS_APPEND=4;var SU_DIR_ACCESS_DELETE=8;var SU_DIR_ACCESS_RENAME=16;var SU_DIR_ACCESS_EXECUTE=32;var SU_DIR_ACCESS_LIST=256;var SU_DIR_ACCESS_CREATE=512;var SU_DIR_ACCESS_REMOVE=1024;var SU_DIR_ACCESS_RENAME_DIR=2048;var SU_DIR_ACCESS_SUBDIR_INHERIT=4096;AW.Formats.DirAccessMask=AW.System.Format.subclass();AW.Formats.DirAccessMask.create=function(){var obj=this.prototype;var _super=this.superclass.prototype;obj.init=function(){_super.init.call(this);};obj.dataToText=function(data){return(FormatDirAccessMask(parseInt(data)));};};AW.Formats.DirAccessSize=AW.System.Format.subclass();AW.Formats.DirAccessSize.create=function(){var obj=this.prototype;var _super=this.superclass.prototype;obj.init=function(){_super.init.call(this);};obj.dataToText=function(data){return(FormatFileSize(parseInt(data)));};};function CreateDirAccessGrid(sHtmlId,sXMLFile,fnOnDoubleClick,anColWidths){if(anColWidths==undefined)anColWidths=[215,90,255];var Grid=CreateAdminGrid(sHtmlId,[g_sPathColumn,g_sAccessColumn,g_sMaxSizeColumn],anColWidths,sXMLFile,"rules","rule",4,fnOnDoubleClick,-1);Grid.setCellFormat([new AW.Formats.XMLString,new AW.Formats.DirAccessMask,new AW.Formats.DirAccessSize]);Grid.RightAlignColumn(2,true);Grid.m_fnPostUpdate=function(){this.DisableSorting();this.refresh();};return(Grid);}function FormatDirAccessMask(nMask){var sRet=new String;(nMask&SU_DIR_ACCESS_READ)?sRet+="R":sRet+="-";(nMask&SU_DIR_ACCESS_WRITE)?sRet+="W":sRet+="-";(nMask&SU_DIR_ACCESS_APPEND)?sRet+="A":sRet+="-";(nMask&SU_DIR_ACCESS_DELETE)?sRet+="D":sRet+="-";(nMask&SU_DIR_ACCESS_RENAME)?sRet+="N":sRet+="-";(nMask&SU_DIR_ACCESS_EXECUTE)?sRet+="E":sRet+="-";(nMask&SU_DIR_ACCESS_LIST)?sRet+="L":sRet+="-";(nMask&SU_DIR_ACCESS_CREATE)?sRet+="C":sRet+="-";(nMask&SU_DIR_ACCESS_REMOVE)?sRet+="R":sRet+="-";(nMask&SU_DIR_ACCESS_RENAME_DIR)?sRet+="N":sRet+="-";(nMask&SU_DIR_ACCESS_SUBDIR_INHERIT)?sRet+="I":sRet+="-";return(sRet);}function CreateDirAccessCheckbox(sLabel,sID,sMaskInput,nMaskValue,nInitMask){var Checkbox=CreateCheckBox(sLabel,sID,sID,(nInitMask&nMaskValue)?true:false);Checkbox.onControlValueChanged=function(bValue){var nMask=parseInt(document.getElementById(sMaskInput).value);if(isNaN(nMask))nMask=0;if(bValue)nMask|=nMaskValue;else nMask&=(~nMaskValue);document.getElementById(sMaskInput).value=nMask;};Checkbox.UpdateState=function(nMask){this.setChecked((nMask&nMaskValue)?true:false,true);};return(Checkbox);}